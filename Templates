import pandas as pd
import plotly.graph_objects as go
import plotly.express as px

# create sample data
wire_segment = pd.DataFrame({
    'segment': ['Segment A', 'Segment B', 'Segment C', 'Segment D'],
    'tran_direction': ['inbound', 'outbound', 'inbound', 'outbound'],
    'total_tran_count': [100, 200, 300, 400],
    'total_tran_amt': [1000, 2000, 3000, 4000]
})

# create table
fig = go.Figure(data=[go.Table(
    header=dict(values=list(wire_segment.columns),
                fill_color='paleturquoise',
                align='left'),
    cells=dict(values=[wire_segment.segment, wire_segment.tran_direction, wire_segment.total_tran_count, wire_segment.total_tran_amt],
               fill_color='lavender',
               align='left'))
])

# add dropdown filter for tran_direction
tran_directions = wire_segment['tran_direction'].unique()
buttons = []
for direction in tran_directions:
    button = dict(label=direction,
                  method='update',
                  args=[{'visible': [True if x == direction else False for x in wire_segment['tran_direction']],
                         'cells.values': [wire_segment.loc[wire_segment['tran_direction'] == direction, col] for col in wire_segment.columns]},
                        {'title': direction}])
    buttons.append(button)

fig.update_layout(updatemenus=[dict(showactive=True, buttons=buttons)])

# display table in notebook
from IPython.core.display import HTML
HTML(fig.to_html())
