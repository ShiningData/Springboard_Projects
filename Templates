import igraph as ig

# Assuming data_corr is your correlation matrix
edges, weights = [], []
threshold = 0.5  # Set a threshold for significant correlations
for i in range(len(data_corr)):
    for j in range(i + 1, len(data_corr)):
        if abs(data_corr.iloc[i, j]) > threshold:
            edges.append((data_corr.columns[i], data_corr.columns[j]))
            weights.append(float(data_corr.iloc[i, j]))

# Create an empty graph
g = ig.Graph()

# Add vertices
g.add_vertices(data_corr.columns.tolist())

# Add edges and weights
g.add_edges(edges)
g.es['weight'] = weights  # Explicitly setting weights

# Now check the weights
print(g.es['weight'][:5])
