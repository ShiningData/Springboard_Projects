import pandas as pd
import plotly.express as px
import plotly.graph_objects as go

# create sample data
wire_segment = pd.DataFrame({
    'segment': ['Segment A', 'Segment B', 'Segment C', 'Segment D'],
    'tran_direction': ['inbound', 'outbound', 'inbound', 'outbound'],
    'total_tran_count': [100, 200, 300, 400],
    'total_tran_amt': [1000, 2000, 3000, 4000]
})

# create table
fig = go.Figure(data=[go.Table(
    header=dict(values=list(wire_segment.columns),
                fill_color='paleturquoise',
                align='left'),
    cells=dict(values=[wire_segment.segment, wire_segment.tran_direction, wire_segment.total_tran_count, wire_segment.total_tran_amt],
               fill_color='lavender',
               align='left'))
])

# add dropdown filter for tran_direction
buttons = []
for direction in wire_segment.tran_direction.unique():
    button = dict(label=direction,
                  method='update',
                  args=[{'visible': [direction == wire_segment.tran_direction.iloc[i] for i in range(len(wire_segment))]},
                        {'title': direction}])
    buttons.append(button)

fig.update_layout(updatemenus=[dict(showactive=True, buttons=buttons)])

# sort by total_tran_amt in descending order
wire_segment = wire_segment.sort_values(by='total_tran_amt', ascending=False)

# display table in notebook
from IPython.core.display import HTML
HTML(fig.to_html())
