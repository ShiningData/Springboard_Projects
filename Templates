import pandas as pd
import plotly.graph_objects as go
from ipywidgets import interact

# Assuming df_tran is your DataFrame and already processed for conditional formatting
# ...

@interact
def show_table(frequency=df_tran['frequency'].unique(), tran_direction=df_tran['tran_direction'].unique()):
    filtered_df = df_tran[(df_tran['frequency'] == frequency) & (df_tran['tran_direction'] == tran_direction)]
    
    trace = go.Table(
        header=dict(values=["Segment", "Transaction Count", "Transaction Amount", "Number of Active Clients"],
                    fill_color='paleturquoise',
                    align='left'),
        cells=dict(values=[filtered_df['segment'], 
                           filtered_df['total_tran_count'].astype(str) + ' ' + filtered_df['total_tran_count_symbol'], 
                           filtered_df['total_tran_amt'].astype(str) + ' ' + filtered_df['total_tran_amt_symbol'], 
                           filtered_df['num_active_clients'].astype(str) + ' ' + filtered_df['num_active_clients_symbol']],
                   fill_color='lavender',
                   align='left')
    )

    fig = go.Figure(data=[trace])

    fig.show()
